{"version":3,"sources":["services/persons.js","components/Filter.js","components/Person.js","components/Persons.js","components/PersonForm.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","services_persons","createPerson","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","person","req","res","wrap","_context","prev","next","axios","post","sent","abrupt","data","stop","_x","apply","this","arguments","updatePerson","_ref2","_callee2","updatedPerson","personUrl","_context2","concat","id","put","_x2","getAllPersons","_ref3","_callee3","_context3","get","deletePerson","_ref4","_callee4","_context4","delete","_x3","Filter","filter","setFilter","handleChange","react_default","createElement","value","onChange","e","target","toLowerCase","Person","handleDelete","name","number","onClick","Persons","persons","filteredNumbers","namesMatch","includes","numbersMatch","map","components_Person","key","PersonForm","addNewContact","newName","newNumber","setNewName","setNewNumber","onSubmit","type","Notification","notification","message","className","class","App","_useState","useState","_useState2","slicedToArray","setPersons","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","setNotification","changeNotification","setTimeout","objectSpread","useEffect","personsService","then","mutatorFunction","newValue","components_Notification","components_Filter","components_PersonForm","event","preventDefault","foundPerson","find","window","confirm","newNotification","p","catch","err","console","log","response","newPerson","errMessage","error","components_Persons","_","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.c45a2b1f.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst createPerson = async person => {\n  const req = axios.post(baseUrl, person);\n  const res = await req;\n  return res.data;\n}\n\nconst updatePerson = async (updatedPerson) => {\n  const personUrl = `${baseUrl}/${updatedPerson.id}`;\n  const req = axios.put(personUrl, updatedPerson);\n  const res = await req;\n  return res.data;\n}\n\nconst getAllPersons = async () => {\n  const req = axios.get(baseUrl);\n  const res = await req;\n  return res.data;\n}\n\nconst deletePerson = async person => {\n  const personUrl = `${baseUrl}/${person.id}`;\n  const req = axios.delete(personUrl, person);\n  const res = await req;\n  return res.data;\n}\n\nexport default { createPerson, updatePerson, getAllPersons, deletePerson };\n","import React from 'react';\n\nconst Filter = ({ filter, setFilter, handleChange }) => (\n  <div>\n    filter shown with\n    <input\n      value={filter}\n      onChange={(e) => handleChange(setFilter, e.target.value.toLowerCase())}\n    />\n  </div>\n);\n\nexport default Filter;","import React from 'react';\n\nconst Person = ({ person, handleDelete }) => {\n  return (\n    <li>\n      {person.name} {person.number}\n      <button onClick={() => handleDelete(person)}>delete</button>\n    </li>\n  );\n}\n\nexport default Person;","import React from 'react';\nimport Person from './Person';\n\nconst Persons = ({ persons, handleDelete, filter }) => {\n  const filteredNumbers = persons.filter(person => {\n    const namesMatch = person.name.toLowerCase().includes(filter);\n    const numbersMatch = person.number.toLowerCase().includes(filter);\n\n    return namesMatch || numbersMatch;\n  });\n\n  const numbers = () => filteredNumbers.map(person => {\n    return (\n      <Person\n        key={person.id}\n        person={person}\n        handleDelete={handleDelete}\n      />\n    )\n  }\n\n  );\n\n  return <ul>{numbers()}</ul>;\n};\n\nexport default Persons;","import React from 'react';\n\nconst PersonForm = ({ addNewContact, newName, newNumber, setNewName, setNewNumber, handleChange }) => (\n  <form onSubmit={addNewContact}>\n    <div>\n      name:\n      <input\n        value={newName}\n        onChange={(e) => handleChange(setNewName, e.target.value)}\n      />\n    </div>\n    <div>\n      number:\n      <input\n        value={newNumber}\n        onChange={(e) => handleChange(setNewNumber, e.target.value)}\n      />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;","import React from 'react';\n\nconst Notification = ({ notification }) => {\n  if (!notification.message) {\n    return null;\n  }\n\n  return (\n    <div className={`notification ${notification.class}`}>\n      {notification.message}\n    </div>\n  );\n}\n\nexport default Notification;","import React, { useState, useEffect } from 'react';\nimport personsService from './services/persons';\nimport Filter from './components/Filter';\nimport Persons from './components/Persons';\nimport PersonForm from './components/PersonForm';\nimport Notification from './components/Notification';\nimport './index.css';\n\nconst App = () => {\n  const defaultState = '';\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(defaultState);\n  const [newNumber, setNewNumber] = useState(defaultState);\n  const [filter, setFilter] = useState(defaultState);\n  const [notification, setNotification] = useState({\n    message: '',\n    class: ''\n  });\n\n  const handleDelete = (person) => {\n    const deleteConfirmed = window.confirm(`Delete ${person.name}?`);\n\n    if (!deleteConfirmed) {\n      return;\n    }\n\n    personsService\n      .deletePerson(person)\n      .then(_ => {\n        const newNotification = {\n          message: `Deleted ${person.name}`,\n          class: \"success\"\n        };\n\n        changeNotification(newNotification);\n\n        setPersons(persons.filter(p => p.id !== person.id));\n      })\n      .catch(err => {\n        const newNotification = {\n          message: `Information of ${person.name} has already been removed from server`,\n          class: 'error'\n        };\n\n        changeNotification(newNotification);\n      });\n  }\n\n  const changeNotification = (notification) => {\n    setNotification(notification);\n\n    setTimeout(() => {\n      setNotification({\n        ...notification,\n        message: ''\n      });\n    }, 5000);\n  }\n\n  useEffect(() => {\n    personsService\n      .getAllPersons()\n      .then(persons => {\n        setPersons(persons);\n      });\n  }, []);\n\n  const addNewContact = (event) => {\n    event.preventDefault();\n\n    const foundPerson = persons.find(person => person.name === newName);\n\n    if (foundPerson) {\n      const updatePerson = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n\n      if (!updatePerson) {\n        return;\n      }\n\n      const updatedPerson = {\n        ...foundPerson,\n        number: newNumber\n      };\n\n      personsService\n        .updatePerson(updatedPerson)\n        .then(res => {\n\n          const newNotification = {\n            message: `Updated contact information for ${updatedPerson.name}`,\n            class: \"success\"\n          };\n\n          changeNotification(newNotification);\n\n          setPersons(persons.map(p => (p.id === foundPerson.id) ? res : p));\n        })\n        .catch(err => {\n          console.log(err.response.data);\n\n          const newNotification = {\n            message: `Error: ${err.response.data}`,\n            class: 'error'\n          }\n\n          changeNotification(newNotification);\n        });\n    } else {\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      };\n\n      personsService\n        .createPerson(newPerson)\n        .then(newPerson => {\n          const newNotification = {\n            message: `Added ${newPerson.name}`,\n            class: 'success'\n          };\n\n          changeNotification(newNotification);\n\n          setPersons(persons.concat(newPerson));\n        })\n        .catch(err => {\n          const errMessage = err.response.data.error;\n\n          const newNotification = {\n            message: `Error: ${errMessage}`,\n            class: \"error\"\n          }\n\n          changeNotification(newNotification);\n        });\n    }\n\n    setNewName(defaultState);\n    setNewNumber(defaultState);\n  };\n\n  const handleChange = (mutatorFunction, newValue) => {\n    mutatorFunction(newValue);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification\n        notification={notification}\n      />\n\n      <Filter filter={filter} setFilter={setFilter} handleChange={handleChange} />\n\n      <h3>add a new</h3>\n      <PersonForm\n        addNewContact={addNewContact}\n        newName={newName}\n        newNumber={newNumber}\n        setNewName={setNewName}\n        setNewNumber={setNewNumber}\n        handleChange={handleChange}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        handleDelete={handleDelete}\n        filter={filter}\n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}